{"version":3,"sources":["base.js","circles.js","index.js"],"names":["$svg","d3","select","padding","top","bottom","left","right","startDate","endDate","domMult","intMult","yearLine","domLine","intLine","setupBase","baseGroup","append","attr","yearGroup","i","text","resizeBase","el","height","width","circles","selectAll","setupCircles","nodes","forEach","data","dataset","createId","on","highlight","clearHighlight","clickHandler","resizeCircles","xMult","type","xPos","yPos","getYFrac","date","console","log","replace","slice","frac","comps","split","Number","init","resize","window","innerWidth","innerHeight","addEventListener"],"mappings":"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","file":"index.js","sourceRoot":"../src/js","sourcesContent":["import { width, height } from \"./index\";\n\nconst $svg = d3.select(\"#graphic-container\");\nconst padding = { top: 10, bottom: 10, left: 50, right: 10 },\n  startDate = 1980,\n  endDate = 2020;\nconst domMult = 0.2,\n  intMult = 0.9;\nlet yearLine, domLine, intLine;\n\nfunction setupBase() {\n  const baseGroup = $svg.append(\"g\").attr(\"id\", \"base-group\");\n  const yearGroup = baseGroup.append(\"g\").attr(\"id\", \"year-group\");\n  for (let i = startDate; i <= endDate; i++) {\n    if (i % 10 == 0) {\n      yearGroup\n        .append(\"text\")\n        .text(i)\n        .attr(\"id\", `year-marker-${i}`)\n        .attr(\"class\", \"year-marker\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .attr(\"text-anchor\", \"middle\");\n    } else {\n      yearGroup\n        .append(\"line\")\n        .attr(\"id\", `year-marker-${i}`)\n        .attr(\"class\", \"year-marker\");\n    }\n  }\n  domLine = baseGroup.append(\"line\").attr(\"id\", \"domLine\");\n  intLine = baseGroup.append(\"line\").attr(\"id\", \"intLine\");\n}\n\nfunction resizeBase() {\n  for (let i = startDate; i <= endDate; i++) {\n    const el = d3.select(`#year-marker-${i}`);\n    if (i % 10 == 0) {\n      el.attr(\"x\", padding.left).attr(\n        \"y\",\n        padding.top + (height * (i - startDate)) / (endDate - startDate)\n      );\n    } else {\n      el.attr(\"x1\", i % 5 == 0 ? padding.left - 10 : padding.left - 5)\n        .attr(\"x2\", i % 5 == 0 ? padding.left + 10 : padding.left + 5)\n        .attr(\n          \"y1\",\n          padding.top + (height * (i - startDate)) / (endDate - startDate)\n        )\n        .attr(\n          \"y2\",\n          padding.top + (height * (i - startDate)) / (endDate - startDate)\n        );\n    }\n  }\n  domLine\n    .attr(\"x1\", padding.left + domMult * width)\n    .attr(\"x2\", padding.left + domMult * width)\n    .attr(\"y1\", padding.top)\n    .attr(\"y2\", padding.top + height);\n\n  intLine\n    .attr(\"x1\", padding.left + intMult * width)\n    .attr(\"x2\", padding.left + intMult * width)\n    .attr(\"y1\", padding.top)\n    .attr(\"y2\", padding.top + height);\n}\n\nexport { setupBase, resizeBase, domMult, intMult, startDate, endDate, padding };\n","import { width, height } from \"./index\";\nimport { domMult, intMult, startDate, endDate, padding } from \"./base\";\n\nconst $svg = d3.select(\"#graphic-container\");\nconst circles = $svg.selectAll(\"circle\");\n\nfunction setupCircles() {\n  circles.nodes().forEach((el, i) => {\n    const data = el.dataset;\n    d3.select(el)\n      .attr(\"id\", createId(data))\n      .on(\"mouseenter\", highlight)\n      .on(\"mouseleave\", clearHighlight)\n      .on(\"click\", clickHandler);\n  });\n}\n\nfunction resizeCircles() {\n  circles.nodes().forEach((el, i) => {\n    const data = el.dataset;\n    const xMult = data.type === \"international\" ? intMult : domMult;\n    const xPos = padding.left + width * xMult;\n    const yPos = padding.top + height * getYFrac(data.date);\n    console.log(data);\n    d3.select(el).attr(\"r\", 5).attr(\"cx\", xPos).attr(\"cy\", yPos);\n    console.log([el, i]);\n  });\n}\n\nfunction createId(data) {\n  const date = data.date;\n  const type = data.type;\n  return date.replace(/\\//gi, \"\") + type.slice(0, 1);\n}\n\nfunction getYFrac(date) {\n  let frac = 0;\n  const comps = date.split(\"/\");\n  frac +=\n    (Number(comps[2]) +\n      Number(comps[0]) / 12 +\n      Number(comps[1]) / 365 -\n      startDate) /\n    (endDate - startDate);\n  return frac;\n}\n\nfunction highlight() {}\n\nfunction clearHighlight() {}\n\nfunction clickHandler() {}\n\nexport { setupCircles, resizeCircles };\n","import { setupBase, resizeBase, padding } from \"./base\";\nimport { setupCircles, resizeCircles } from \"./circles\";\n\nconst $svg = d3.select(\"#graphic-container\");\nlet width, height;\n\nfunction init() {\n  setupBase();\n  setupCircles();\n}\n\nfunction resize() {\n  width = window.innerWidth - padding.left - padding.right;\n  height = window.innerHeight - padding.top - padding.bottom;\n  $svg.attr(\"viewBox\", `0 0 ${window.innerWidth} ${window.innerHeight}`);\n  resizeBase();\n  resizeCircles();\n}\n\ninit();\nresize();\n\nwindow.addEventListener(\"resize\", resize);\n\nexport { width, height };\n"]}